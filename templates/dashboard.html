<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fire Detection Dashboard - UNSA</title>
    <link rel="stylesheet" href="/static/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Sistema de Detección de Incendios</h1>
            <p class="subtitle">Universidad Nacional de San Agustín · Arequipa, Perú</p>
        </header>

        <div class="grid">
            <div class="card">
                <h2>Estado del Sistema</h2>
                <div id="statusIndicator" class="status-indicator status-normal">
                    CARGANDO...
                </div>
                <div class="threshold-info" id="thresholdInfo">
                    <strong>Umbrales de Detección</strong><br>
                    Alerta: ≥45°C o ≥800 lux<br>
                    Peligro: ≥55°C o ≥1000 lux
                </div>
            </div>

            <div class="card">
                <h2>Sensores en Tiempo Real</h2>
                <div class="sensor-value">
                    <span class="sensor-label">Temperatura</span>
                    <span class="sensor-number" id="temperatura">--</span>
                </div>
                <div class="sensor-value">
                    <span class="sensor-label">Luz Ambiente</span>
                    <span class="sensor-number" id="luz">--</span>
                </div>
                <div class="sensor-value">
                    <span class="sensor-label">Humedad</span>
                    <span class="sensor-number" id="humedad">--</span>
                </div>
                <div class="sensor-value">
                    <span class="sensor-label">Presión</span>
                    <span class="sensor-number" id="presion">--</span>
                </div>
            </div>

            <div class="card">
                <h2>Análisis de Inteligencia Artificial</h2>
                <div id="iaResult" style="text-align: center; padding: 20px; color: #95a5a6;">
                    Sin análisis disponible
                </div>
            </div>
        </div>

        <div class="chart-grid">
            <div class="card">
                <h2>Temperatura en el Tiempo</h2>
                <div class="chart-container">
                    <canvas id="chartTemperatura"></canvas>
                </div>
            </div>
            <div class="card">
                <h2>Luz Ambiente en el Tiempo</h2>
                <div class="chart-container">
                    <canvas id="chartLuz"></canvas>
                </div>
            </div>
        </div>

        <div class="chart-grid">
            <div class="card">
                <h2>Humedad en el Tiempo</h2>
                <div class="chart-container">
                    <canvas id="chartHumedad"></canvas>
                </div>
            </div>
            <div class="card">
                <h2>Presión Atmosférica en el Tiempo</h2>
                <div class="chart-container">
                    <canvas id="chartPresion"></canvas>
                </div>
            </div>
        </div>

        <div class="grid">
            <div class="card">
                <h2>Últimas 5 Capturas</h2>

                <div id="fotosWrapper">
                    <div id="fotosContainer" class="fotos-container">
                        <button id="prevFoto" class="foto-nav" aria-label="Anterior">&#9664;</button>
                        <div id="fotosList" class="fotos-list" aria-live="polite"></div>
                        <button id="nextFoto" class="foto-nav" aria-label="Siguiente">&#9654;</button>
                    </div>

                    <div id="noFotos" class="no-image" style="margin-top:8px;">No hay capturas disponibles</div>
                </div>

                <div id="fotoModal" class="modal" role="dialog" aria-modal="true">
                    <span class="close" id="closeModal">&times;</span>
                    <img class="modal-content" id="modalImage" src="" alt="Imagen ampliada">
                </div>

            </div>

            <div class="card">
                <h2>Registro de Eventos</h2>
                <div class="event-log" id="eventLog">
                    <div style="text-align: center; color: #95a5a6; padding: 20px;">Cargando eventos...</div>
                </div>
            </div>
        </div>

        <div class="update-time" id="updateTime">
            Última actualización: --
        </div>
    </div>

    <script src="/static/dashboard.js"></script>
</body>
</html>
